{"ast":null,"code":"var __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n};\n\nfunction getLast(items) {\n  if (items.length) {\n    return items[items.length - 1];\n  }\n\n  return null;\n}\n\nexport function getValue(index, length) {\n  var _a = stack.zIndex,\n      min = _a.min,\n      max = _a.max;\n\n  if (length <= max - min) {\n    return index + min;\n  }\n\n  return Math.max(min, max - (length - index) + 1);\n}\n\nfunction find(items, predicate, thisArg) {\n  var length = items.length;\n\n  for (var i = 0; i < length; i++) {\n    if (predicate(items[i], i, items)) {\n      return items[i];\n    }\n  }\n\n  return;\n}\n\nfunction setZIndexOfElements(elements) {\n  var length = elements.length;\n  elements.forEach(function (element, index) {\n    element.style.zIndex = String(getValue(index, length));\n  });\n}\n\nfunction getOwnerPopup(element, items) {\n  var parentEl = element;\n\n  do {\n    var owner = find(items, function (el) {\n      return el.element === parentEl;\n    });\n\n    if (owner) {\n      return owner.element;\n    }\n  } while (parentEl = parentEl.parentElement);\n\n  return;\n}\n\nfunction getChildPopups(item, items) {\n  var owners = items.filter(function (i) {\n    return i.owner;\n  }).map(function (i) {\n    return {\n      element: i.element,\n      parent: getOwnerPopup(i.owner, items)\n    };\n  }).filter(function (i) {\n    return i.parent === item.element;\n  });\n  return owners;\n}\n\nfunction get(obj, path) {\n  var parts = path.split('.');\n  var first = parts.splice(0, 1)[0];\n\n  if (parts.length && obj[first]) {\n    return get(obj[first], parts.join('.'));\n  } else {\n    return obj[first];\n  }\n}\n\nfunction set(obj, path, value) {\n  var parts = path.split('.');\n  var first = parts.splice(0, 1)[0];\n\n  if (parts.length) {\n    if (obj[first] === undefined) {\n      obj[first] = {};\n    }\n\n    set(obj[first], parts.join('.'), value);\n  } else {\n    obj[first] = value;\n  }\n\n  return value;\n}\n\nif (typeof window !== 'undefined') {\n  window.workday = window.workday || {};\n}\n\nvar getFromWindow = function getFromWindow(path) {\n  if (typeof window !== 'undefined') {\n    return get(window, path);\n  }\n\n  return undefined;\n};\n\nvar setToWindow = function setToWindow(path, value) {\n  if (typeof window !== 'undefined') {\n    set(window, path, value);\n  }\n};\n\nvar stack = getFromWindow('workday.__popupStack') || {\n  description: 'Global popup stack from @workday/canvas-kit-popup-stack',\n  items: [],\n  zIndex: {\n    min: 30,\n    max: 50,\n    getValue: getValue\n  },\n  _adapter: {}\n};\nsetToWindow('workday.__popupStack', stack);\nexport var PopupStack = {\n  createContainer: function createContainer() {\n    var _a;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.createContainer) {\n      return stack._adapter.createContainer();\n    }\n\n    var div = document.createElement('div');\n    div.style.position = 'relative';\n    return div;\n  },\n  add: function add(item) {\n    var _a;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.add) {\n      stack._adapter.add(item);\n\n      return;\n    }\n\n    stack.items.push(item);\n    document.body.appendChild(item.element);\n    setZIndexOfElements(PopupStack.getElements());\n  },\n  remove: function remove(element) {\n    var _a;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.remove) {\n      stack._adapter.remove(element);\n\n      return;\n    }\n\n    stack.items = stack.items.filter(function (item) {\n      return item.element !== element;\n    });\n    document.body.removeChild(element);\n    setZIndexOfElements(PopupStack.getElements());\n  },\n  isTopmost: function isTopmost(element) {\n    var _a;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.isTopmost) {\n      return stack._adapter.isTopmost(element);\n    }\n\n    var last = getLast(stack.items);\n\n    if (last) {\n      return last.element === element;\n    }\n\n    return false;\n  },\n  getElements: function getElements() {\n    var _a;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.getElements) {\n      return stack._adapter.getElements();\n    }\n\n    return stack.items.map(function (i) {\n      return i.element;\n    });\n  },\n  bringToTop: function bringToTop(element) {\n    var _a;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.bringToTop) {\n      stack._adapter.bringToTop(element);\n\n      return;\n    }\n\n    var item = find(stack.items, function (i) {\n      return i.element === element;\n    });\n\n    if (item) {\n      stack.items = __spreadArrays(stack.items.filter(function (i) {\n        return i !== item;\n      }), [item]);\n      getChildPopups(item, stack.items).forEach(function (popup) {\n        PopupStack.bringToTop(popup.element);\n      });\n      setZIndexOfElements(PopupStack.getElements());\n    } else {\n      var e = new Error();\n      console.warn('Could not find item', e.stack);\n    }\n  },\n  contains: function contains(element, eventTarget) {\n    var _a, _b;\n\n    if ((_a = stack._adapter) === null || _a === void 0 ? void 0 : _a.contains) {\n      return stack._adapter.contains(element, eventTarget);\n    }\n\n    var item = find(stack.items, function (i) {\n      return i.element === element;\n    });\n\n    if (item) {\n      return eventTarget === item.owner || ((_b = item.owner) === null || _b === void 0 ? void 0 : _b.contains(eventTarget)) || element.contains(eventTarget);\n    }\n\n    return false;\n  }\n};\nexport function resetStack() {\n  stack.items = [];\n}\nexport var createAdapter = function createAdapter(adapter) {\n  stack._adapter = adapter;\n};","map":null,"metadata":{},"sourceType":"module"}